# Project Blueprint: Audio Recording Web App

**Overview:** Aplicação web em React para gravação de áudio em fluxo guiado, frase a frase, pensada para pesquisa em síntese de fala, reconhecimento de emoções e sotaques, com foco em proteção de dados (LGPD), UI escura moderna e experiência de gravação clara.

## Implemented Features:

*   **Tech & Routing:** Stack com React, react-router-dom, MUI (@mui/material) com tema customizado, uso de MediaDevices.getUserMedia, MediaRecorder e Web Audio API para visualização; rotas principais: “/” (HomePage) e “/recording” (RecordingPage).
*   **UI/UX:** Tema dark como padrão, com roxo vibrante como cor de destaque; HomePage com layout centralizado, texto curto explicando o app e um call-to-action para começar a gravação; RecordingPage com layout em duas colunas dentro de um Paper para sensação de estúdio/painel, com lado esquerdo mostrando instruções, frase atual, botões (start/stop), countdown e progresso, e lado direito exibindo visualização em tempo real (espectrograma de barras animadas reagindo ao áudio); animações suaves nas transições de estados (idle → countdown → recording → finished) e feedback visual em botões.
*   **Recording Flow (atual):** uso de getUserMedia para capturar o microfone e MediaRecorder para gravar; fluxo frase a frase mostrando “Frase X de N”, countdown antes de gravar, gravação por tempo definido ou até o usuário parar, armazenamento dos clipes em memória e avanço automático para a próxima frase, tudo com espectrograma em tempo real indicando que o áudio está sendo capturado.
*   **Pesquisa, Consentimento e Proteção de Dados:** 
    *   **Objetivo:** antes de qualquer gravação, obter consentimento explícito do usuário para uso das gravações em pesquisa de síntese de fala, emoções e sotaques, garantindo anonimização, conformidade com LGPD e direito de interromper ou solicitar exclusão dos dados.
    *   **Gatilho:** sempre que o usuário clicar em “Start Recording” na RecordingPage, um modal de consentimento aparece; enquanto o modal está aberto a gravação ainda não inicia e o resto da tela fica bloqueado (backdrop).
    *   **UI do Modal:** implementado com Dialog/Modal do MUI sobre a RecordingPage; título sugerido “Consentimento para Pesquisa e Proteção de Dados”; texto curto explicando a pesquisa e o uso dos dados; checkbox obrigatório com texto do tipo “Li e estou de acordo com o uso da minha gravação para pesquisa em síntese de fala, reconhecimento de emoções e sotaques, com anonimização dos meus dados e possibilidade de solicitar exclusão a qualquer momento.”; link para o termo completo (pode ser uma rota tipo “/consent” ou um PDF externo) com rótulo “Leia o termo completo de consentimento”; dois botões: primário “Aceito e quero continuar” (desabilitado enquanto o checkbox não estiver marcado) e secundário “Não aceito”, que cancela o fluxo.
    *   **Texto curto de consentimento sugerido para o modal:** “Aviso sobre a pesquisa e proteção de dados: Suas gravações serão usadas em uma pesquisa sobre síntese de fala, reconhecimento de emoções e sotaques. Todos os dados serão tratados de forma anonimizada e protegidos de acordo com a LGPD. Você pode interromper a participação a qualquer momento e solicitar a exclusão das suas gravações.”, seguido do checkbox com o texto de concordância e do link para o termo completo.
    *   **Resultados possíveis:** se o usuário aceita (checkbox marcado + clique em “Aceito e quero continuar”), o modal fecha e o app continua o fluxo normal de gravação (inicia o countdown e depois a captura da frase); no futuro, esse evento pode ser logado em backend com userId, timestamp e versão do termo. Se o usuário não aceita (“Não aceito”), o app cancela a operação, não grava nada e redireciona para a Home (“/”), podendo exibir um aviso tipo “Você precisa aceitar o termo de consentimento para participar da gravação.”.
*   **User Flow atualizado – Início da gravação:** 1) usuário acessa “/recording”; 2) clica em “Start Recording”; 3) aparece o modal de consentimento com texto curto, checkbox e link; 4) se marcar o checkbox e clicar em “Aceito e quero continuar”, o modal fecha, o countdown começa e a gravação da primeira frase é iniciada; 5) se clicar em “Não aceito”, o app volta para a Home e não realiza nenhuma gravação.
*   **Flow frase a frase (lógica principal, agora protegida por consentimento):** mostrar “Frase X de N”, fazer countdown (3,2,1), iniciar a gravação com espectrograma ativo, parar a gravação (automático ou manual), armazenar o áudio, avançar para a próxima frase até concluir o conjunto.

## Future Enhancements:

*   **Audio Storage & Export:** permitindo download de clipes individuais em formatos como .wav ou .webm, exportação de todas as frases em um .zip e upload para backend com metadados.
*   **Consent Logging:** em backend com endpoint para armazenar userId ou sessionId anônimo, timestamp, versão do termo e, se necessário legalmente, informações adicionais.
*   **User Accounts & Authentication:** com histórico de sessões.
*   **Database Integration:** para armazenar frases e permitir conjuntos dinâmicos por experimento/idioma.
*   **Internationalization:** com PT-BR como padrão e opção de EN.
*   **Oral Consent:** em que antes da primeira frase o sistema toca um áudio-guia explicando a pesquisa e grava a resposta verbal do usuário (“Sim, eu concordo”), armazenando esse trecho como primeira gravação da sessão, alinhado ao texto do termo.